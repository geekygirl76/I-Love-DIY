<% action_url = (action == :edit ? user_url(user) : users_url) %>

<form action="<%= action_url %>" method="post">
  <input type="hidden" name="authenticity_token" 
         value="<%= form_authenticity_token %>" />
         
   <% if action == :edit %>
       <input type="hidden" name="_method" value="put">
     <% end %>    
    
  <label for="user_username">Username</label>
  <input
    type="text"
    name="user[username]"
    value="<%= user.username %>"
    id="user_username">
    <br>

  <label for="user_password">Password</label>
  <input
    type="password"
    name="user[password]"
    id="user_password">

  <br>
  
  <label for="user_email">Email</label>
  <input
    type="email"
    name="user[email]"
    id="user_email">
    <br>

  <input type="submit">
</form>