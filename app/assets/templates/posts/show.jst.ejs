<head>
  <style>



  div.post-title{
      width: 700px;
      height: 60px;
     margin:auto;
      padding: 5px 10px;
  }

  .post-show > ul {
    float:left;

  }



  .post-show > ul > li{
    float: right;
  padding: 10px 15px;
  }



  p.post-title > ul {

  }

  p.post-title > ul > li {

    margin:auto;

  }


   img{

    margin-bottom: 20px;
  }

  textarea.comment{
    width:400px;
    height: 100px;
  }

  button.reply-button{
    color: white;
  }

  button.delete{
      border: 0
      background: transparent;
  }
  .title{
      color: black;
      display: inline;
  }

  </style>
</head>




<body>






<main class="post-article other">
<header class="post-header">

  <h1 class="title"><%= post.escape("title") %></h1>


  <ul class=" icons group">

      <li><a  class="like" href="/posts/<%=post.id%>/upvote"></a></li>
      <li><a class="dislike" href="/posts/<%=post.id%>/downvote"></a></li>

  <% if (window.currentUser.id === post.get("user_id")){ %>

    <li class="edit-post"><a href="#/posts/<%= post.id %>/edit"><button>Edit Post</button></a></li>
      <li class="delete_post"><a><button class="delete" data-id="<%= post.id %>">Delete Post</button></a></li>
 <% } %>
  </ul>
</header>

<figure class="post-picture">
<img src="<%= post.get("photo_url") %>">
</figure>

<article class="post-article">
  <%= post.escape("body") %>
</article>



<form class="post-comment-form post-form" >
  <input type="hidden"
         name="comment[post_id]"
         value="<%= post.id %>">

 <div class="comment-body">
   <label for="comment_body" >
     Comment On This Post
   <textarea class="comment"

     name="comment[body]"

     id="comment_body">
     </textarea>
   </label>

 </div>

   <button id="post-comment">Submit</button>

</form>

<ul class="comments"></ul>

<div class="comments-new"></div>

<ul class="comments">
  <% post.comments().each(function(comment){ %>
    <%= console.log ("parent comment:", comment.get("parent_comment_id")=== null) %>
     <% if (comment.get("parent_comment_id") === null ) { %>

       <li class="root-comment"><%= comment.escape("body") %> (by:<a href="/users/<%=comment.get("user_id")%>/public">User<%=  comment.escape("user_id") %></a>)
       <%=comment.escape("created_at")%>
       <a href="/comments/<%= comment.id %>/comments/new">Reply</a>
       </li>


    <% } else { %>
      <ul class="nested-comments">


          <li class="comment"><%= comment.escape("body") %> (by:<a href="/users/<%=comment.get("user_id")%>/public">User<%=  comment.escape("user_id") %></a>)
          <%=comment.escape("created_at")%>
          <button class="reply-button"><a href="/comments/<%= comment.id %>/comments/new">Reply</a></button>
          </li>

      </ul>

    <% }%>


  <% }) %>
</ul>
</main>

</body>





